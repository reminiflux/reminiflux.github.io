(this.webpackJsonpreminiflux=this.webpackJsonpreminiflux||[]).push([[0],{31:function(e,t,n){e.exports=n(51)},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),i=n(6),u=n.n(i),l=n(13),f=n(8),d=n(10),s=n(7),m=n(4),b=n(3),g=n(12),h=n(2),p=n(5);function v(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tfloat: left;\n\tmargin-right: 3px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return v=function(){return e},e}function O(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-top: 0px;\n\tmargin-right: 5px;\n\tfont-size: 12px;\n\twidth: 30px;\n\theight: 30px;\n"]);return O=function(){return e},e}function x(){var e=Object(b.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tvertical-align: middle;\n\tmargin-right: 5px;\n"]);return x=function(){return e},e}function j(){var e=Object(b.a)(["\n\tmargin-left: ",";\n\tfont-weight: ",";\n\tbackground-color: ",";\n\tcolor: ",";\n\tpadding: 2px;\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n\t"," {\n\t\tbackground-color: ",";\n\t}\n"]);return j=function(){return e},e}function E(){var e=Object(b.a)(["\n\tmargin-left: 10px;\n\tborder-radius: 4px;\n\tfont-weight: bold;\n\ttext-align: center;\n\tfont-size: 10px;\n\tcolor: white;\n\tmin-width: 20px;\n\tdisplay: inline-block;\n\tpadding: 1px;\n"]);return E=function(){return e},e}function k(){var e=Object(b.a)(["\n\tpadding: 5px;\n"]);return k=function(){return e},e}var w=h.c.div(k()),S=h.c.div(E()),y=h.c.div(j(),(function(e){return e.isFeed?"20px":"0px"}),(function(e){return e.isFeed?"inherit":"bold"}),(function(e){return e.selected?e.theme.selectbg:"inherit"}),(function(e){return e.error?e.theme.errorentry:e.unread?"inherit":e.theme.readentry}),(function(e){return e.theme.hoverbg}),S,(function(e){return e.isFeed?e.theme.feedbubble:e.theme.categorybubble})),I=h.c.img(x()),C=h.c.button(O()),_=h.c.div(v()),F=function(e,t){var n;switch(t.type){case"collapse":n=[].concat(Object(d.a)(e),[t.category]);break;case"expand":n=e.filter((function(e){return e!==t.category}));break;default:return e}return localStorage.setItem("collapsed",JSON.stringify(n)),n};var R=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useReducer)(F,JSON.parse(localStorage.getItem("collapsed"))||[]),u=Object(m.a)(i,2),l=u[0],f=u[1],d=function(){return o(!c)},s=Object(r.useState)([]),b=Object(m.a)(s,2),g=b[0],h=b[1],v=Object(r.useRef)(),O=function(e){v.current&&v.current.scrollIntoView({block:"center"}),e.preventDefault()};return Object(p.a)("up",(function(t){e.onFeedChange(g[g.indexOf(e.currentFeed)-1>=0?g.indexOf(e.currentFeed)-1:0]),O(t)}),[e,g]),Object(p.a)("down",(function(t){e.onFeedChange(g[g.indexOf(e.currentFeed)+1<g.length?g.indexOf(e.currentFeed)+1:g.length-1]),O(t)}),[e,g]),Object(p.a)("shift+u",(function(){return d()}),[c]),Object(p.a)("x",(function(){if(e.currentFeed){var t=e.currentFeed.is_feed?e.currentFeed.category.id:e.currentFeed.id;t<0||f({type:l.includes(t)?"expand":"collapse",category:t})}}),[e.currentFeed,l]),Object(r.useEffect)((function(){return h(e.feeds.filter((function(e){return(!c||e.unreads>0)&&(!e.is_feed||e.is_feed&&!l.includes(e.category.id))})))}),[e.feeds,c,l]),a.a.createElement(w,null,a.a.createElement(C,{onClick:function(e){d(),e.target.blur()},title:"Toggle showing all/unread feeds"},c?"\u26aa":"\u26ab"),g.map((function(t){return a.a.createElement("div",{key:t.fetch_url||t.id},!t.fetch_url&&(l.includes(t.id)?a.a.createElement(_,{onClick:function(){return f({type:"expand",category:t.id})}},"\u25b6"):a.a.createElement(_,{onClick:function(){return f({type:"collapse",category:t.id})}},"\u25bc")),a.a.createElement(y,{ref:t===e.currentFeed?v:null,isFeed:t.is_feed,selected:t===e.currentFeed,unread:t.unreads,error:t.parsing_error_count,title:t.parsing_error_message,onClick:function(){return e.onFeedChange(t)}},t.is_feed&&a.a.createElement(I,{src:t.icon_data}),t.title,t.unreads>0&&a.a.createElement(S,null," ",t.unreads," ")))})))},H=n(16),M=n.n(H);function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("miniflux_server"),a=localStorage.getItem("miniflux_api_key");if(!r||!a)return t("Server settings not configured."),new Promise((function(e,t){return null}));var c={headers:{"X-Auth-Token":a}};n&&(c.method="PUT",c.body=JSON.stringify(n));var o=r+"/v1/"+e,i=function(e){return t(e+" ("+o+")")};return fetch(o,c).then((function(e){if(!e.ok)throw e;return 204===e.status?e:e.json()})).catch((function(e){if(e instanceof TypeError)i(e.message);else if(e instanceof Response){var t=e.headers.get("content-type");t&&-1!==t.indexOf("application/json")?e.json().then((function(e){return i(e.error_message)})):e.text().then((function(e){return i(e)}))}else i(String(e));return Promise.reject()}))}function T(e,t,n){return a.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:n&&{textDecoration:"none",color:"inherit"}},e)}function N(e){var t=document.createElement("canvas");t.width=16,t.height=16;var n=t.getContext("2d"),r=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(e)%360;return n.beginPath(),n.rect(0,0,16,16),n.fillStyle="hsl("+r+", 50%, 25%)",n.fill(),n.fillStyle="hsl("+(360-r)+", 100%, 75%)",n.font="bold 14px sans-serif",n.textBaseline="middle",n.textAlign="center",n.fillText(e[0],t.width/2,t.height/2+1),t.toDataURL()}function D(){var e=Object(b.a)(["\n\theight: 20px;\n\tfont-size: 90%;\n\twidth: 40px;\n\tmargin-right: 5px;\n"]);return D=function(){return e},e}function P(){var e=Object(b.a)(["\n\tfloat: right;\n"]);return P=function(){return e},e}function A(){var e=Object(b.a)(["\n\tfont-size: 90%;\n"]);return A=function(){return e},e}function U(){var e=Object(b.a)(["\n\tfont-weight: bold;\n\tfont-size: 120%;\n"]);return U=function(){return e},e}function J(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n"]);return J=function(){return e},e}function B(){var e=Object(b.a)(["\n\tpadding: 2px;\n\twidth: 100%;\n\tbackground: ",";\n\tborder-bottom: 1px solid lightgray;\n"]);return B=function(){return e},e}function L(){var e=Object(b.a)(["\n\tfont-size: 80%;\n\tcolor: ",";\n\tmargin-left: 10px;\n"]);return L=function(){return e},e}function Y(){var e=Object(b.a)(["\n\twhite-space: nowrap;\n\toverflow: hidden;\n\twidth: ",";\n\ttext-align: ",";\n"]);return Y=function(){return e},e}function K(){var e=Object(b.a)(["\n\tcolor: ",";\n\tbackground-color: ",";\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"]);return K=function(){return e},e}function V(){var e=Object(b.a)(["\n\tborder: none;\n\tborder-collapse: collapse;\n\twidth: 100%;\n\ttable-layout: fixed;\n"]);return V=function(){return e},e}function W(){var e=Object(b.a)(["\n\theight: 10px;\n\twidth: 10px;\n\tborder: 1px solid #bbb;\n\tbackground-color: ",";\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n"]);return W=function(){return e},e}function X(){var e=Object(b.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tvertical-align: middle;\n"]);return X=function(){return e},e}var Z=h.c.img(X()),q=h.c.div(W(),(function(e){return e.read?e.theme.body:e.theme.unreaddot})),$=h.c.table(V()),G=h.c.tr(K(),(function(e){return e.read?e.theme.readentry:"inherit"}),(function(e){return e.selected?e.theme.selectbg:"inherit"}),(function(e){return e.theme.hoverbg})),Q=h.c.td(Y(),(function(e){return e.width||"100%"}),(function(e){return e.align||"left"})),ee=h.c.span(L(),(function(e){return e.theme.preview})),te=a.a.forwardRef((function(e,t){return a.a.createElement(G,{read:"unread"!==e.item.status,ref:t,selected:e.selected},a.a.createElement(Q,{width:"20px"},a.a.createElement(Z,{src:e.feed.icon_data,alt:e.feed.title,title:e.feed.title})),a.a.createElement(Q,{onClick:e.markRead,width:"20px"},a.a.createElement(q,{read:"unread"!==e.item.status})),a.a.createElement(Q,{onClick:e.onItemChange},e.item.title,a.a.createElement(ee,null,function(e){var t=document.createElement("span");return t.innerHTML=e.slice(0,500),t.querySelectorAll("*").forEach((function(e){return e.textContent?e.textContent+=" ":e.innerText+=" "})),[t.textContent||t.innerText].toString().replace(/ +/g," ")}(e.item.content))),a.a.createElement(Q,{width:"40px",align:"right",onClick:e.onItemChange,title:e.item.published_at},function(e){var t=(Date.now()-Date.parse(e))/1e3;return t>86400?Math.floor(t/86400)+"d":t>3600?Math.floor(t/3600)+"h":Math.floor(t/60)+"m"}(e.item.published_at)))}));function ne(e){var t=Object(r.useRef)(),n=function(t){t&&(e.onItemChange(t),"unread"===t.status&&e.markRead([t]))},c=function(e,r){n(e),t.current&&t.current.scrollIntoView({block:"center"}),r.preventDefault()};return Object(p.a)("left,p,k",(function(t){c(e.items[e.currentIndex-1>=0?e.currentIndex-1:0],t)}),[e]),Object(p.a)("right,n,j,space",(function(t){c(e.items[e.currentIndex+1<e.items.length?e.currentIndex+1:e.currentIndex<0?0:e.items.length-1],t)}),[e]),Object(p.a)("home",(function(t){c(e.items[0],t)}),[e]),Object(p.a)("end",(function(t){c(e.items[e.items.length-1],t)}),[e]),Object(p.a)("m",(function(t){e.currentIndex>=0&&e.markRead([e.items[e.currentIndex]],"unread"===e.items[e.currentIndex].status)}),[e]),a.a.createElement($,null,a.a.createElement("tbody",null,e.items.map((function(r){return a.a.createElement(te,{key:r.id,ref:e.currentItem===r?t:null,item:r,selected:e.currentItem===r,feed:e.feeds.find((function(e){return e.id===r.feed.id&&e.category})),onItemChange:function(){return n(r)},markRead:function(){return e.markRead([r],"unread"===r.status)},errorHandler:e.errorHandler})}))))}var re=h.c.div(B(),(function(e){return e.theme.listheaderbg})),ae=h.c.div(J()),ce=h.c.span(U()),oe=h.c.span(A()),ie=h.c.div(P()),ue=h.c.button(D());function le(e){var t=function(){e.markRead(e.items)};return Object(p.a)("shift+A",(function(){return t()}),[e.items]),Object(p.a)("u",(function(){return e.setShowRead(!e.showRead)}),[e.showRead]),Object(p.a)("s",(function(){return e.setSortOldFirst(!e.sortOldFirst)}),[e.sortOldFirst]),a.a.createElement(re,null,e.currentFeed&&a.a.createElement(ae,null,a.a.createElement(ce,null,e.currentFeed.title,"\xa0",e.currentFeed.site_url&&T(a.a.createElement("span",null,"\u2197"),e.currentFeed.site_url,!0)),"\xa0",a.a.createElement(oe,null,"(",e.items.length," items)")),a.a.createElement(ie,null,a.a.createElement(ue,{onClick:t,title:"Mark all as read"}," ","\u2713"," "),a.a.createElement(ue,{onClick:function(){e.currentIndex>=0&&e.markRead(e.items.slice(0,e.currentIndex+1))},title:"Mark all until selection as read"}," ","\u2913"," "),a.a.createElement(ue,{onClick:function(){e.currentIndex>=0&&e.markRead(e.items.slice(e.currentIndex))},title:"Mark all after selection as read"}," ","\u2912"," "),a.a.createElement("select",{value:e.showRead?"a":"u",onChange:function(t){e.setShowRead("a"===t.target.value),t.target.blur()}},a.a.createElement("option",{value:"u"},"Show unread only"),a.a.createElement("option",{value:"a"},"Show all")),a.a.createElement("select",{value:e.sortOldFirst?"o":"n",onChange:function(t){e.setSortOldFirst("o"===t.target.value),t.target.blur()}},a.a.createElement("option",{value:"n"},"Newest first"),a.a.createElement("option",{value:"o"},"Oldest first"))))}var fe=function(e){var t=Object(r.useState)([]),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(!1),l=Object(m.a)(i,2),f=l[0],b=l[1],h=Object(r.useState)("o"===localStorage.getItem("sort")),p=Object(m.a)(h,2),v=p[0],O=p[1],x=Object(r.useState)("a"===localStorage.getItem("filter")),j=Object(m.a)(x,2),E=j[0],k=j[1];Object(r.useEffect)((function(){(function(){var t=Object(s.a)(u.a.mark((function t(){var n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFeed){t.next=12;break}return b(!0),n=e.currentFeed.fetch_url?[e.currentFeed.fetch_url]:e.feeds.filter((function(e){return e.category})).filter((function(t){return t.category.id===e.currentFeed.id})).map((function(e){return e.fetch_url})),t.next=5,Promise.all(n.map((function(t){return z(t+(t.includes("?")?"&":"?")+"limit="+(parseInt(localStorage.getItem("fetch_limit"))||100)+"&order=published_at&direction="+(v?"asc":"desc")+(E?"":"&status=unread"),e.errorHandler)})));case 5:r=t.sent,a=[],r.forEach((function(e){return a.push.apply(a,Object(d.a)(e.entries))})),o(a.sort((function(e,t){return v?e.published_at.localeCompare(t.published_at):t.published_at.localeCompare(e.published_at)}))),b(!1),t.next=13;break;case 12:o([]);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[v,E,e.currentFeed,e.feeds,e.errorHandler]);var w=function(){var t=Object(s.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=7;break}return t.next=3,z("entries",e.errorHandler,{entry_ids:n.map((function(e){return e.id})),status:r||void 0===r?"read":"unread"});case 3:e.updateUnread(n.map((function(e){return e.feed.id})).filter((function(e,t,n){return n.indexOf(e)===t}))),a=c,n.forEach((function(e){return a[a.indexOf(e)].status=r||void 0===r?"read":"unread"})),o(a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return a.a.createElement(g.a,{split:"horizontal",minSize:"26px",defaultSize:"26px",allowResize:!1},a.a.createElement(le,{items:c,currentFeed:e.currentFeed,currentIndex:e.currentItem?c.indexOf(e.currentItem):-1,sortOldFirst:v,setSortOldFirst:function(e){O(e),localStorage.setItem("sort",e?"o":"n")},showRead:E,setShowRead:function(e){k(e),localStorage.setItem("filter",e?"a":"u")},markRead:w,errorHandler:e.errorHandler}),f?"...":a.a.createElement(ne,{items:c,feeds:e.feeds,currentItem:e.currentItem,currentIndex:e.currentItem?c.indexOf(e.currentItem):-1,onItemChange:e.onItemChange,markRead:w,errorHandler:e.errorHandler}))};function de(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tfloat: right;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\timg {\n\t\twidth: 27px;\n\t\theight: 27px;\n\t}\n"]);return de=function(){return e},e}function se(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tfloat: right;\n\tfont-size: 20px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return se=function(){return e},e}function me(){var e=Object(b.a)(["\n\tpadding: 5px;\n"]);return me=function(){return e},e}function be(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n"]);return be=function(){return e},e}function ge(){var e=Object(b.a)(["\n\tpadding: 2px;\n\tbackground-color: ",";\n\tborder-bottom: 1px solid lightgrey;\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n"]);return ge=function(){return e},e}var he=h.c.div(ge(),(function(e){return e.theme.itemheaderbg})),pe=h.c.div(be()),ve=h.c.div(me()),Oe=h.c.div(se()),xe=h.c.div(de());function je(e){var t=localStorage.getItem("wallabag");t&&window.open(t.replace(/\/$/,"")+"/bookmarklet?url="+encodeURIComponent(e),"_blank")}var Ee=function(e){var t=Object(r.useState)(),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useRef)();Object(p.a)("f",(function(){return d()}),[c]),Object(p.a)("v",(function(){return c&&window.open(c.url,"_blank")}),[c]),Object(p.a)("c",(function(){return c&&window.open(c.comments_url||c.url,"_blank")}),[c]),Object(p.a)("w",(function(){return c&&je(c.url)}),[c]),Object(p.a)("pagedown",(function(e){e.preventDefault();var t=document.getElementsByClassName("Pane horizontal Pane2")[1];t.scrollTop+=t.clientHeight})),Object(p.a)("pageup",(function(e){e.preventDefault();var t=document.getElementsByClassName("Pane horizontal Pane2")[1];t.scrollTop-=t.clientHeight})),Object(r.useEffect)((function(){o(e.currentItem),i.current&&i.current.scrollIntoView()}),[e.currentItem]);var l,d=function(){var t=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=5;break}return t.next=3,z("entries/"+c.id+"/bookmark",e.errorHandler,{});case 3:c.starred=!c.starred,o(Object(f.a)(Object(f.a)({},c),{},{starred:c.starred}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c?a.a.createElement("div",{ref:i},a.a.createElement(he,null,a.a.createElement(pe,null,T(c.title,c.url),"\xa0",T(a.a.createElement("span",{role:"img","aria-label":"comments"},"\ud83d\udcac"),c.comments_url||c.url,!0),a.a.createElement("br",null),c.author||c.feed.title,","," ",(l=c.published_at,M()(l).format("D MMM HH:mm"))),a.a.createElement(Oe,{title:"Toggle star",onClick:d},String.fromCharCode(c.starred?9733:9734)),localStorage.getItem("wallabag")&&a.a.createElement(xe,{onClick:function(){return je(c.url)}},a.a.createElement("img",{alt:"Wallabag",title:"Send to Wallabag",src:"/wallabag.svg"}))),a.a.createElement(ve,{dangerouslySetInnerHTML:{__html:c.content}})):null},ke=n(30),we=n(29),Se=n.n(we);function ye(){var e=Object(b.a)(["\n\twidth: 350px;\n"]);return ye=function(){return e},e}function Ie(){var e=Object(b.a)(["\n\ttext-align: center;\n\tpadding: 5px;\n"]);return Ie=function(){return e},e}function Ce(){var e=Object(b.a)(["\n\ttext-align: center;\n"]);return Ce=function(){return e},e}function _e(){var e=Object(b.a)(["\n\t.Modal {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tright: auto;\n\t\tbottom: auto;\n\t\tbackground-color: ",";\n\t\tpadding: 10px;\n\t\tmargin-right: -50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.Overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: ",";\n\t}\n"]);return _e=function(){return e},e}var Fe=[["Up","Open previous feed"],["Down","Open next feed"],["U","Toggle showing unread/all feeds"],["x","Collapse/uncollapse current category"],["Left/p/k","Open previous item"],["Right/n/j/Space","Open next item"],["Home","Open first item"],["End","Open last item"],["PageUp","Scroll item content up"],["PageDown","Scroll item content down"],["m","Mark item as read/unread"],["A","Mark all items as read"],["u","Toggle showing unread/all items"],["s","Toggle item sort order (newest/oldest first)"],["f","Star/unstar item"],["v","Open original link in new tab"],["c","Open comments link in new tab"],["w","Send original link to Wallabag (if configured)"],["D","Toggle light/dark theme"],["h","Show keyboard shortcuts"],["Escape/Enter","Close modal window"]],Re=Object(h.c)((function(e){var t=e.className,n=e.modalClassName,r=Object(ke.a)(e,["className","modalClassName"]);return a.a.createElement(Se.a,Object.assign({className:n,portalClassName:t},r))})).attrs({overlayClassName:"Overlay",modalClassName:"Modal"})(_e(),(function(e){return e.theme.body}),(function(e){return e.theme.modalbg})),He=h.c.h2(Ce()),Me=h.c.table(Ie()),ze=h.c.input(ye());function Te(e){return Object(p.a)("esc, enter",(function(){e.onClose()})),a.a.createElement(Re,{isOpen:!0,ariaHideApp:!1},a.a.createElement(He,null,"Keyboard shortcuts"),a.a.createElement(Me,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Key"),a.a.createElement("th",null,"Command"))),a.a.createElement("tbody",null,Fe.map((function(e,t){return a.a.createElement("tr",{key:t},e.map((function(e,t){return a.a.createElement("td",{key:t},e)})))})))),a.a.createElement("button",{onClick:e.onClose},"OK"))}function Ne(e){var t=Object(r.useState)(localStorage.getItem("miniflux_server")||""),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(localStorage.getItem("miniflux_api_key")||""),u=Object(m.a)(i,2),l=u[0],f=u[1],d=Object(r.useState)(localStorage.getItem("fetch_limit")||100),s=Object(m.a)(d,2),b=s[0],g=s[1],h=Object(r.useState)(localStorage.getItem("wallabag")||""),v=Object(m.a)(h,2),O=v[0],x=v[1],j=Object(r.useState)(localStorage.getItem("favicons")||""),E=Object(m.a)(j,2),k=E[0],w=E[1];Object(p.a)("esc",(function(){e.onClose()}),{filter:function(){return!0}}),Object(p.a)("enter",(function(){S()}),{filter:function(){return!0}},[c,l,b,O]);var S=function(){localStorage.setItem("miniflux_server",c||""),localStorage.setItem("miniflux_api_key",l||""),localStorage.setItem("fetch_limit",parseInt(b)||100),localStorage.setItem("wallabag",O||""),localStorage.setItem("theme",e.theme),e.onSubmit(),e.onClose()};return a.a.createElement(Re,{isOpen:!0,ariaHideApp:!1},a.a.createElement(He,null,"Reminiflux"),a.a.createElement("p",null,T("Homepage","https://github.com/reminiflux/reminiflux"),a.a.createElement("br",null),"Build date:"," ",M()("2020-08-05T12:23:03.956Z").format("YYYY-MM-DD HH:mm:ss (Z)"),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){o("https://minifluxdemo.duckdns.org"),f("demo")}},"Configure demo access")),a.a.createElement("h3",null,"Settings"),a.a.createElement("p",null,a.a.createElement("b",null,"Host")," (without /v1, e.g."," ",a.a.createElement("i",null,"https://miniflux.mydomain.tld"),"):",a.a.createElement("br",null),a.a.createElement(ze,{value:c,onChange:function(e){return o(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"API key")," (generated in Miniflux):",a.a.createElement("br",null),a.a.createElement(ze,{value:l,onChange:function(e){return f(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Maximum number of items to fetch"),":",a.a.createElement("br",null),a.a.createElement(ze,{value:b,onChange:function(e){return g(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Wallabag URL for integration")," (optional, without /bookmarklet):",a.a.createElement("br",null),a.a.createElement(ze,{value:O,onChange:function(e){return x(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Theme"),":",a.a.createElement("br",null),a.a.createElement("select",{value:e.theme,onChange:function(t){return e.themeSetter(t.target.value)}},a.a.createElement("option",{value:"auto"},"auto"),a.a.createElement("option",{value:"light"},"light"),a.a.createElement("option",{value:"dark"},"dark"))),a.a.createElement("p",null,a.a.createElement("b",null,"Icon cache size"),":",Math.round(k.length/1024),"k",a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){localStorage.removeItem("favicons"),w("")}},"Clear cache")),a.a.createElement("button",{onClick:S},"OK"),a.a.createElement("button",{onClick:e.onClose},"Cancel"))}function De(){var e=Object(b.a)(["\n\tbody {\n\t\tmargin: 0px;\n\t\tfont-family: Verdana, sans-serif;\n\t\tfont-size: 12px;\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\tdiv.Pane {\n\t\toverflow: auto;\n\t\tpadding: 0px\n\t}\n\ta {\n\t\tcolor: ","\n\t}\n\tbutton {\n\t\tborder: 1px solid grey;\n\t\tborder-radius: 4px;\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\t&: hover {\n\t\t\tcolor: ",";\n\t\t\tbackground-color: ",";\n\t\t}\n\t}\n\tselect {\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\t"]);return De=function(){return e},e}var Pe=Object(h.b)(De(),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.link}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.dropdownbg}),(function(e){return e.theme.dropdownfg})),Ae={body:"#fefefe",text:"#363537",link:"blue",readentry:"#bbb",errorentry:"red",hoverbg:"grey",selectbg:"lightslategrey",feedbubble:"#2a89bc",categorybubble:"#454545",preview:"#bbb",unreaddot:"#555",listheaderbg:"#ddd",itemheaderbg:"lightgoldenrodyellow",buttonbg:"#bbb",buttonfg:"#363537",dropdownbg:"#fefefe",dropdownfg:"#363537",modalbg:"darkgrey",errorbg:"lightcoral",errorfg:"inherit"},Ue=Object(f.a)(Object(f.a)({},Ae),{body:"#363537",text:"#fafafa",link:"#2a89bc",readentry:"#999",categorybubble:"#959595",unreaddot:"#bbb",listheaderbg:"#464547",itemheaderbg:"#464547",buttonbg:"#565557",buttonfg:"#fafafa",dropdownbg:"#565557",dropdownfg:"#fafafa",modalbg:"#565557",errorbg:"darkred"});n(50);function Je(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-top: 5px;\n\tmargin-right: 5px;\n\tfont-size: 16px;\n\twidth: 30px;\n\theight: 30px;\n"]);return Je=function(){return e},e}function Be(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-right: 20px;\n"]);return Be=function(){return e},e}function Le(){var e=Object(b.a)(["\n\tpadding: 10px;\n\tbackground-color: ",";\n\tcolor: ",";\n\ttext-align: center;\n\tposition: absolute;\n\twidth: 100%;\n\tz-index: 100;\n\tfont-weight: bold;\n"]);return Le=function(){return e},e}var Ye=h.c.div(Le(),(function(e){return e.theme.errorbg}),(function(e){return e.theme.errorfg})),Ke=h.c.div(Be()),Ve=h.c.button(Je()),We=function(e){return e.reduce((function(e,t){return e+(t.unreads||0)}),0)},Xe=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ue:Ae;var Ze=function(){var e=Object(r.useState)(localStorage.getItem("theme")||"auto"),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(),i=Object(m.a)(o,2),b=i[0],v=i[1],O=Object(r.useState)(),x=Object(m.a)(O,2),j=x[0],E=x[1],k=Object(r.useState)(),w=Object(m.a)(k,2),S=w[0],y=w[1],I=Object(r.useState)([]),C=Object(m.a)(I,2),_=C[0],F=C[1],H=Object(r.useState)(!1),M=Object(m.a)(H,2),T=M[0],D=M[1],P=Object(r.useState)(!localStorage.getItem("miniflux_server")),A=Object(m.a)(P,2),U=A[0],J=A[1],B=Object(r.useState)(!0),L=Object(m.a)(B,2),Y=L[0],K=L[1],V=Object(r.useState)([]),W=Object(m.a)(V,2),X=W[0],Z=W[1],q=a.a.useState(),$=Object(m.a)(q,2)[1],G=a.a.useCallback((function(){return $({})}),[]),Q=JSON.parse(localStorage.getItem("favicons"))||{};return Object(r.useEffect)((function(){Y&&function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("feeds",v);case 2:t=e.sent,n=[],t.forEach((function(e){n.find((function(t){return t.id===e.category.id}))||n.push(e.category)})),r=[{id:-1,title:"All",fetch_url:"entries",unreads:0},{id:-2,title:"Starred",fetch_url:"entries?starred=true",unreads:0}],n.filter((function(e){return e})).sort((function(e,t){return e.title.localeCompare(t.title)})).forEach((function(e){r.push(e),r.push.apply(r,Object(d.a)(t.filter((function(t){return t.category.id===e.id})).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return Object.assign(e,{fetch_url:"feeds/"+e.id+"/entries",is_feed:!0})}))))})),r.forEach(function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.icon_data=N(t.title),!t.icon||!(t.id in Q)){e.next=5;break}t.icon_data=Q[t.id],e.next=12;break;case 5:if(!t.icon){e.next=12;break}return e.next=8,z("feeds/"+t.id+"/icon",v);case 8:n=e.sent,t.icon_data="data:"+n.data,localStorage.setItem("favicons",JSON.stringify(Object(f.a)(Object(f.a)({},JSON.parse(localStorage.getItem("favicons"))),{},Object(l.a)({},t.id,t.icon_data)))),G();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F(r),Z(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),K(!1)}),[Y,Q,G]),Object(r.useEffect)((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(parseInt(t)&&(n=_,t=_.find((function(e){return e.id===t&&e.fetch_url}))),t.fetch_url){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,z(t.fetch_url+(t.fetch_url.includes("?")?"&":"?")+"status=unread&limit=1",v);case 5:r=e.sent,t.unreads=r.total,document.title=We(n.filter((function(e){return e.id>0&&e.is_feed})))+" | reminiflux",n.filter((function(e){return!e.fetch_url})).forEach((function(e){e.unreads=We(n.filter((function(t){return t.category&&t.category.id===e.id})))})),G();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();X.length>0&&([-2,-1].concat(Object(d.a)(X)).forEach((function(t){return e(t,X)})),Z([]))}),[_,G,X]),Object(p.a)("h",(function(){U||D(!0)}),[U]),Object(p.a)("shift+d",(function(){U||c("light"===n?"dark":"light")}),[U,n]),a.a.createElement(h.a,{theme:"auto"===n?Xe:"light"===n?Ae:Ue},a.a.createElement(Pe,null),T?a.a.createElement(Te,{onClose:function(){return D(!1)}}):U?a.a.createElement(Ne,{theme:n,themeSetter:c,onClose:function(){E(null),y(null),J(!1)},onSubmit:function(){v(null),K(!0)}}):a.a.createElement("div",null,b&&a.a.createElement(Ye,null,"API error: ",String(b),a.a.createElement(Ke,null,a.a.createElement("button",{onClick:function(){return v(null)}},"X"))),a.a.createElement(g.a,{split:"vertical",minSize:250,defaultSize:parseInt(localStorage.getItem("v_split"))||"35%",onChange:function(e){return localStorage.setItem("v_split",e)}},a.a.createElement("div",null,a.a.createElement(Ve,{onClick:function(){return J(!0)},title:"Settings"},"\u2699"),a.a.createElement(Ve,{onClick:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.blur(),e.next=3,z("feeds/refresh",v,{});case 3:K(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),title:"Refresh feeds and counts"},"\u21bb"),a.a.createElement(R,{currentFeed:j,feeds:_,onFeedChange:E,errorHandler:v})),a.a.createElement(g.a,{split:"horizontal",minSize:"10%",defaultSize:parseInt(localStorage.getItem("h_split"))||"40%",onChange:function(e){return localStorage.setItem("h_split",e)}},a.a.createElement(fe,{currentFeed:j,currentItem:S,feeds:_,onItemChange:y,updateUnread:Z,errorHandler:v}),a.a.createElement(Ee,{currentItem:S,errorHandler:v})))))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ze,null)),document.getElementById("root"))}},[[31,1,2]]]);