(this.webpackJsonpreminiflux=this.webpackJsonpreminiflux||[]).push([[0],{31:function(e,t,n){e.exports=n(51)},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),i=n(6),u=n.n(i),l=n(13),s=n(8),d=n(10),f=n(7),m=n(4),g=n(3),b=n(12),p=n(2),h=n(5);function v(){var e=Object(g.a)(["\n\tdisplay: inline-block;\n\tfloat: left;\n\tmargin-right: 3px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return v=function(){return e},e}function O(){var e=Object(g.a)(["\n\tfloat: right;\n\tmargin-top: 0px;\n\tmargin-right: 5px;\n\tfont-size: 12px;\n\twidth: 30px;\n\theight: 30px;\n"]);return O=function(){return e},e}function j(){var e=Object(g.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tvertical-align: middle;\n\tmargin-right: 5px;\n"]);return j=function(){return e},e}function x(){var e=Object(g.a)(["\n\tmargin-left: ",";\n\tfont-weight: ",";\n\tbackground-color: ",";\n\tcolor: ",";\n\tpadding: 2px;\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n\t"," {\n\t\tbackground-color: ",";\n\t}\n"]);return x=function(){return e},e}function E(){var e=Object(g.a)(["\n\tmargin-left: 10px;\n\tborder-radius: 4px;\n\tfont-weight: bold;\n\ttext-align: center;\n\tfont-size: 10px;\n\tcolor: white;\n\tmin-width: 20px;\n\tdisplay: inline-block;\n\tpadding: 1px;\n"]);return E=function(){return e},e}function w(){var e=Object(g.a)(["\n\tpadding: 5px;\n"]);return w=function(){return e},e}var k=p.c.div(w()),I=p.c.div(E()),S=p.c.div(x(),(function(e){return e.isFeed?"20px":"0px"}),(function(e){return e.isFeed?"inherit":"bold"}),(function(e){return e.selected?e.theme.selectbg:"inherit"}),(function(e){return e.error?e.theme.errorentry:e.unread?"inherit":e.theme.readentry}),(function(e){return e.theme.hoverbg}),I,(function(e){return e.isFeed?e.theme.feedbubble:e.theme.categorybubble})),y=p.c.img(j()),C=p.c.button(O()),_=p.c.div(v()),N=function(e,t){var n;switch(t.type){case"collapse":n=[].concat(Object(d.a)(e),[t.category]);break;case"expand":n=e.filter((function(e){return e!==t.category}));break;default:return e}return localStorage.setItem("collapsed",JSON.stringify(n)),n};var M=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useReducer)(N,JSON.parse(localStorage.getItem("collapsed"))||[]),u=Object(m.a)(i,2),l=u[0],s=u[1],d=function(){return o(!c)},f=Object(r.useState)([]),g=Object(m.a)(f,2),b=g[0],p=g[1],v=Object(r.useRef)(),O=function(e){v.current&&v.current.scrollIntoView({block:"center"}),e.preventDefault()};return Object(h.a)("up",(function(t){e.onFeedChange(b[b.indexOf(e.currentFeed)-1>=0?b.indexOf(e.currentFeed)-1:0]),O(t)}),[e,b]),Object(h.a)("down",(function(t){e.onFeedChange(b[b.indexOf(e.currentFeed)+1<b.length?b.indexOf(e.currentFeed)+1:b.length-1]),O(t)}),[e,b]),Object(h.a)("shift+u",(function(){return d()}),[c]),Object(h.a)("x",(function(){if(e.currentFeed){var t=e.currentFeed.is_feed?e.currentFeed.category.id:e.currentFeed.id;t<0||s({type:l.includes(t)?"expand":"collapse",category:t})}}),[e.currentFeed,l]),Object(r.useEffect)((function(){return p(e.feeds.filter((function(e){return(!c||e.unreads>0)&&(!e.is_feed||e.is_feed&&!l.includes(e.category.id))})))}),[e.feeds,c,l]),a.a.createElement(k,null,a.a.createElement(C,{onClick:function(e){d(),e.target.blur()},title:"Toggle showing all/unread feeds"},c?"\u26aa":"\u26ab"),b.map((function(t){return a.a.createElement("div",{key:t.fetch_url||t.id},!t.fetch_url&&(l.includes(t.id)?a.a.createElement(_,{onClick:function(){return s({type:"expand",category:t.id})}},"\u25b6"):a.a.createElement(_,{onClick:function(){return s({type:"collapse",category:t.id})}},"\u25bc")),a.a.createElement(S,{ref:t===e.currentFeed?v:null,isFeed:t.is_feed,selected:t===e.currentFeed,unread:t.unreads,error:t.parsing_error_count,title:t.parsing_error_message,onClick:function(){return e.onFeedChange(t)}},t.is_feed&&a.a.createElement(y,{src:t.icon_data}),t.title,t.unreads>0&&a.a.createElement(I,null," ",t.unreads," ")))})))},D=n(16),z=n.n(D);function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("miniflux_server"),a=localStorage.getItem("miniflux_api_key");if(!r||!a)return t("Server settings not configured."),new Promise((function(e,t){return null}));var c={headers:{"X-Auth-Token":a}};n&&(c.method="PUT",c.body=JSON.stringify(n));var o=r+"/v1/"+e,i=function(e){return t(e+" ("+o+")")};return fetch(o,c).then((function(e){if(!e.ok)throw e;return 204===e.status?e:e.json()})).catch((function(e){if(e instanceof TypeError)i(e.message);else if(e instanceof Response){var t=e.headers.get("content-type");t&&-1!==t.indexOf("application/json")?e.json().then((function(e){return i(e.error_message)})):e.text().then((function(e){return i(e)}))}else i(String(e));return Promise.reject()}))}function F(e,t,n){return a.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:n&&{textDecoration:"none",color:"inherit"}},e)}function L(){var e=Object(g.a)(["\n\theight: 20px;\n\tfont-size: 90%;\n\twidth: 40px;\n\tmargin-right: 5px;\n"]);return L=function(){return e},e}function H(){var e=Object(g.a)(["\n\tfloat: right;\n"]);return H=function(){return e},e}function R(){var e=Object(g.a)(["\n\tfont-size: 90%;\n"]);return R=function(){return e},e}function Z(){var e=Object(g.a)(["\n\tfont-weight: bold;\n\tfont-size: 120%;\n"]);return Z=function(){return e},e}function T(){var e=Object(g.a)(["\n\tdisplay: inline-block;\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n"]);return T=function(){return e},e}function J(){var e=Object(g.a)(["\n\tpadding: 2px;\n\twidth: 100%;\n\tbackground: ",";\n\tborder-bottom: 1px solid lightgray;\n"]);return J=function(){return e},e}function Q(){var e=Object(g.a)(["\n\tfont-size: 80%;\n\tcolor: ",";\n\tmargin-left: 10px;\n"]);return Q=function(){return e},e}function G(){var e=Object(g.a)(["\n\twhite-space: nowrap;\n\toverflow: hidden;\n\twidth: ",";\n\ttext-align: ",";\n"]);return G=function(){return e},e}function A(){var e=Object(g.a)(["\n\tcolor: ",";\n\tbackground-color: ",";\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"]);return A=function(){return e},e}function K(){var e=Object(g.a)(["\n\tborder: none;\n\tborder-collapse: collapse;\n\twidth: 100%;\n\ttable-layout: fixed;\n"]);return K=function(){return e},e}function Y(){var e=Object(g.a)(["\n\theight: 10px;\n\twidth: 10px;\n\tborder: 1px solid #bbb;\n\tbackground-color: ",";\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n"]);return Y=function(){return e},e}function B(){var e=Object(g.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tvertical-align: middle;\n"]);return B=function(){return e},e}var V=p.c.img(B()),W=p.c.div(Y(),(function(e){return e.read?e.theme.body:e.theme.unreaddot})),U=p.c.table(K()),X=p.c.tr(A(),(function(e){return e.read?e.theme.readentry:"inherit"}),(function(e){return e.selected?e.theme.selectbg:"inherit"}),(function(e){return e.theme.hoverbg})),q=p.c.td(G(),(function(e){return e.width||"100%"}),(function(e){return e.align||"left"})),$=p.c.span(Q(),(function(e){return e.theme.preview})),ee=a.a.forwardRef((function(e,t){return a.a.createElement(X,{read:"unread"!==e.item.status,ref:t,selected:e.selected},a.a.createElement(q,{width:"20px"},a.a.createElement(V,{src:e.feed.icon_data,alt:e.feed.title,title:e.feed.title})),a.a.createElement(q,{onClick:e.markRead,width:"20px"},a.a.createElement(W,{read:"unread"!==e.item.status})),a.a.createElement(q,{onClick:e.onItemChange},e.item.title,a.a.createElement($,null,function(e){var t=document.createElement("span");return t.innerHTML=e.slice(0,500),t.querySelectorAll("*").forEach((function(e){return e.textContent?e.textContent+=" ":e.innerText+=" "})),[t.textContent||t.innerText].toString().replace(/ +/g," ")}(e.item.content))),a.a.createElement(q,{width:"40px",align:"right",onClick:e.onItemChange,title:e.item.published_at},function(e){var t=(Date.now()-Date.parse(e))/1e3;return t>86400?Math.floor(t/86400)+"d":t>3600?Math.floor(t/3600)+"h":Math.floor(t/60)+"m"}(e.item.published_at)))}));function te(e){var t=Object(r.useRef)(),n=function(t){t&&(e.onItemChange(t),"unread"===t.status&&e.markRead([t]))},c=function(e,r){n(e),t.current&&t.current.scrollIntoView({block:"center"}),r.preventDefault()};return Object(h.a)("left,p,k",(function(t){c(e.items[e.currentIndex-1>=0?e.currentIndex-1:0],t)}),[e]),Object(h.a)("right,n,j,space",(function(t){c(e.items[e.currentIndex+1<e.items.length?e.currentIndex+1:e.currentIndex<0?0:e.items.length-1],t)}),[e]),Object(h.a)("home",(function(t){c(e.items[0],t)}),[e]),Object(h.a)("end",(function(t){c(e.items[e.items.length-1],t)}),[e]),Object(h.a)("m",(function(t){e.currentIndex>=0&&e.markRead([e.items[e.currentIndex]],"unread"===e.items[e.currentIndex].status)}),[e]),a.a.createElement(U,null,a.a.createElement("tbody",null,e.items.map((function(r){return a.a.createElement(ee,{key:r.id,ref:e.currentItem===r?t:null,item:r,selected:e.currentItem===r,feed:e.feeds.find((function(e){return e.id===r.feed.id&&e.category})),onItemChange:function(){return n(r)},markRead:function(){return e.markRead([r],"unread"===r.status)},errorHandler:e.errorHandler})}))))}var ne=p.c.div(J(),(function(e){return e.theme.listheaderbg})),re=p.c.div(T()),ae=p.c.span(Z()),ce=p.c.span(R()),oe=p.c.div(H()),ie=p.c.button(L());function ue(e){var t=function(){e.markRead(e.items)};return Object(h.a)("shift+A",(function(){return t()}),[e.items]),Object(h.a)("u",(function(){return e.setShowRead(!e.showRead)}),[e.showRead]),Object(h.a)("s",(function(){return e.setSortOldFirst(!e.sortOldFirst)}),[e.sortOldFirst]),a.a.createElement(ne,null,e.currentFeed&&a.a.createElement(re,null,a.a.createElement(ae,null,e.currentFeed.title,"\xa0",e.currentFeed.site_url&&F(a.a.createElement("span",null,"\u2197"),e.currentFeed.site_url,!0)),"\xa0",a.a.createElement(ce,null,"(",e.items.length," items)")),a.a.createElement(oe,null,a.a.createElement(ie,{onClick:t,title:"Mark all as read"}," ","\u2713"," "),a.a.createElement(ie,{onClick:function(){e.currentIndex>=0&&e.markRead(e.items.slice(0,e.currentIndex+1))},title:"Mark all until selection as read"}," ","\u2913"," "),a.a.createElement(ie,{onClick:function(){e.currentIndex>=0&&e.markRead(e.items.slice(e.currentIndex))},title:"Mark all after selection as read"}," ","\u2912"," "),a.a.createElement("select",{value:e.showRead?"a":"u",onChange:function(t){e.setShowRead("a"===t.target.value),t.target.blur()}},a.a.createElement("option",{value:"u"},"Show unread only"),a.a.createElement("option",{value:"a"},"Show all")),a.a.createElement("select",{value:e.sortOldFirst?"o":"n",onChange:function(t){e.setSortOldFirst("o"===t.target.value),t.target.blur()}},a.a.createElement("option",{value:"n"},"Newest first"),a.a.createElement("option",{value:"o"},"Oldest first"))))}var le=function(e){var t=Object(r.useState)([]),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(!1),l=Object(m.a)(i,2),s=l[0],g=l[1],p=Object(r.useState)("o"===localStorage.getItem("sort")),h=Object(m.a)(p,2),v=h[0],O=h[1],j=Object(r.useState)("a"===localStorage.getItem("filter")),x=Object(m.a)(j,2),E=x[0],w=x[1];Object(r.useEffect)((function(){(function(){var t=Object(f.a)(u.a.mark((function t(){var n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFeed){t.next=12;break}return g(!0),n=e.currentFeed.fetch_url?[e.currentFeed.fetch_url]:e.feeds.filter((function(e){return e.category})).filter((function(t){return t.category.id===e.currentFeed.id})).map((function(e){return e.fetch_url})),t.next=5,Promise.all(n.map((function(t){return P(t+(t.includes("?")?"&":"?")+"limit="+(parseInt(localStorage.getItem("fetch_limit"))||100)+"&order=published_at&direction="+(v?"asc":"desc")+(E?"":"&status=unread"),e.errorHandler)})));case 5:r=t.sent,a=[],r.forEach((function(e){return a.push.apply(a,Object(d.a)(e.entries))})),o(a.sort((function(e,t){return v?e.published_at.localeCompare(t.published_at):t.published_at.localeCompare(e.published_at)}))),g(!1),t.next=13;break;case 12:o([]);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[v,E,e.currentFeed,e.feeds,e.errorHandler]);var k=function(){var t=Object(f.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=7;break}return t.next=3,P("entries",e.errorHandler,{entry_ids:n.map((function(e){return e.id})),status:r||void 0===r?"read":"unread"});case 3:e.updateUnread(n.map((function(e){return e.feed.id})).filter((function(e,t,n){return n.indexOf(e)===t}))),a=c,n.forEach((function(e){return a[a.indexOf(e)].status=r||void 0===r?"read":"unread"})),o(a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return a.a.createElement(b.a,{split:"horizontal",minSize:"26px",defaultSize:"26px",allowResize:!1},a.a.createElement(ue,{items:c,currentFeed:e.currentFeed,currentIndex:e.currentItem?c.indexOf(e.currentItem):-1,sortOldFirst:v,setSortOldFirst:function(e){O(e),localStorage.setItem("sort",e?"o":"n")},showRead:E,setShowRead:function(e){w(e),localStorage.setItem("filter",e?"a":"u")},markRead:k,errorHandler:e.errorHandler}),s?"...":a.a.createElement(te,{items:c,feeds:e.feeds,currentItem:e.currentItem,currentIndex:e.currentItem?c.indexOf(e.currentItem):-1,onItemChange:e.onItemChange,markRead:k,errorHandler:e.errorHandler}))};function se(){var e=Object(g.a)(["\n\tdisplay: inline-block;\n\tfloat: right;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\timg {\n\t\twidth: 27px;\n\t\theight: 27px;\n\t}\n"]);return se=function(){return e},e}function de(){var e=Object(g.a)(["\n\tdisplay: inline-block;\n\tfloat: right;\n\tfont-size: 20px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return de=function(){return e},e}function fe(){var e=Object(g.a)(["\n\tpadding: 5px;\n"]);return fe=function(){return e},e}function me(){var e=Object(g.a)(["\n\tdisplay: inline-block;\n"]);return me=function(){return e},e}function ge(){var e=Object(g.a)(["\n\tpadding: 2px;\n\tbackground-color: ",";\n\tborder-bottom: 1px solid lightgrey;\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n"]);return ge=function(){return e},e}var be=p.c.div(ge(),(function(e){return e.theme.itemheaderbg})),pe=p.c.div(me()),he=p.c.div(fe()),ve=p.c.div(de()),Oe=p.c.div(se());function je(e){var t=localStorage.getItem("wallabag");t&&window.open(t.replace(/\/$/,"")+"/bookmarklet?url="+encodeURIComponent(e),"_blank")}var xe=function(e){var t=Object(r.useState)(),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useRef)();Object(h.a)("f",(function(){return d()}),[c]),Object(h.a)("v",(function(){return c&&window.open(c.url,"_blank")}),[c]),Object(h.a)("c",(function(){return c&&window.open(c.comments_url||c.url,"_blank")}),[c]),Object(h.a)("w",(function(){return c&&je(c.url)}),[c]),Object(h.a)("pagedown",(function(e){e.preventDefault();var t=document.getElementsByClassName("Pane horizontal Pane2")[1];t.scrollTop+=t.clientHeight})),Object(h.a)("pageup",(function(e){e.preventDefault();var t=document.getElementsByClassName("Pane horizontal Pane2")[1];t.scrollTop-=t.clientHeight})),Object(r.useEffect)((function(){o(e.currentItem),i.current&&i.current.scrollIntoView()}),[e.currentItem]);var l,d=function(){var t=Object(f.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=5;break}return t.next=3,P("entries/"+c.id+"/bookmark",e.errorHandler,{});case 3:c.starred=!c.starred,o(Object(s.a)(Object(s.a)({},c),{},{starred:c.starred}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c?a.a.createElement("div",{ref:i},a.a.createElement(be,null,a.a.createElement(pe,null,F(c.title,c.url),"\xa0",F(a.a.createElement("span",{role:"img","aria-label":"comments"},"\ud83d\udcac"),c.comments_url||c.url,!0),a.a.createElement("br",null),c.author||c.feed.title,","," ",(l=c.published_at,z()(l).format("D MMM HH:mm"))),a.a.createElement(ve,{title:"Toggle star",onClick:d},String.fromCharCode(c.starred?9733:9734)),localStorage.getItem("wallabag")&&a.a.createElement(Oe,{onClick:function(){return je(c.url)}},a.a.createElement("img",{alt:"Wallabag",title:"Send to Wallabag",src:"/wallabag.svg"}))),a.a.createElement(he,{dangerouslySetInnerHTML:{__html:c.content}})):null},Ee=n(30),we=n(29),ke=n.n(we);function Ie(){var e=Object(g.a)(["\n\twidth: 350px;\n"]);return Ie=function(){return e},e}function Se(){var e=Object(g.a)(["\n\ttext-align: center;\n\tpadding: 5px;\n"]);return Se=function(){return e},e}function ye(){var e=Object(g.a)(["\n\ttext-align: center;\n"]);return ye=function(){return e},e}function Ce(){var e=Object(g.a)(["\n\t.Modal {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tright: auto;\n\t\tbottom: auto;\n\t\tbackground-color: ",";\n\t\tpadding: 10px;\n\t\tmargin-right: -50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.Overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: ",";\n\t}\n"]);return Ce=function(){return e},e}var _e=[["Up","Open previous feed"],["Down","Open next feed"],["U","Toggle showing unread/all feeds"],["x","Collapse/uncollapse current category"],["Left/p/k","Open previous item"],["Right/n/j/Space","Open next item"],["Home","Open first item"],["End","Open last item"],["PageUp","Scroll item content up"],["PageDown","Scroll item content down"],["m","Mark item as read/unread"],["A","Mark all items as read"],["u","Toggle showing unread/all items"],["s","Toggle item sort order (newest/oldest first)"],["f","Star/unstar item"],["v","Open original link in new tab"],["c","Open comments link in new tab"],["w","Send original link to Wallabag (if configured)"],["D","Toggle light/dark theme"],["h","Show keyboard shortcuts"],["Escape/Enter","Close modal window"]],Ne=Object(p.c)((function(e){var t=e.className,n=e.modalClassName,r=Object(Ee.a)(e,["className","modalClassName"]);return a.a.createElement(ke.a,Object.assign({className:n,portalClassName:t},r))})).attrs({overlayClassName:"Overlay",modalClassName:"Modal"})(Ce(),(function(e){return e.theme.body}),(function(e){return e.theme.modalbg})),Me=p.c.h2(ye()),De=p.c.table(Se()),ze=p.c.input(Ie());function Pe(e){return Object(h.a)("esc, enter",(function(){e.onClose()})),a.a.createElement(Ne,{isOpen:!0,ariaHideApp:!1},a.a.createElement(Me,null,"Keyboard shortcuts"),a.a.createElement(De,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Key"),a.a.createElement("th",null,"Command"))),a.a.createElement("tbody",null,_e.map((function(e,t){return a.a.createElement("tr",{key:t},e.map((function(e,t){return a.a.createElement("td",{key:t},e)})))})))),a.a.createElement("button",{onClick:e.onClose},"OK"))}function Fe(e){var t=Object(r.useState)(localStorage.getItem("miniflux_server")||""),n=Object(m.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(localStorage.getItem("miniflux_api_key")||""),u=Object(m.a)(i,2),l=u[0],s=u[1],d=Object(r.useState)(localStorage.getItem("fetch_limit")||100),f=Object(m.a)(d,2),g=f[0],b=f[1],p=Object(r.useState)(localStorage.getItem("wallabag")||""),v=Object(m.a)(p,2),O=v[0],j=v[1],x=Object(r.useState)(localStorage.getItem("favicons")||""),E=Object(m.a)(x,2),w=E[0],k=E[1];Object(h.a)("esc",(function(){e.onClose()}),{filter:function(){return!0}}),Object(h.a)("enter",(function(){I()}),{filter:function(){return!0}},[c,l,g,O]);var I=function(){localStorage.setItem("miniflux_server",c||""),localStorage.setItem("miniflux_api_key",l||""),localStorage.setItem("fetch_limit",parseInt(g)||100),localStorage.setItem("wallabag",O||""),localStorage.setItem("theme",e.theme),e.onSubmit(),e.onClose()};return a.a.createElement(Ne,{isOpen:!0,ariaHideApp:!1},a.a.createElement(Me,null,"Reminiflux"),a.a.createElement("p",null,F("Homepage","https://github.com/reminiflux/reminiflux"),a.a.createElement("br",null),"Build date:"," ",z()("2020-07-14T18:09:44.055Z").format("YYYY-MM-DD HH:mm:ss (Z)"),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){o("https://minifluxdemo.duckdns.org"),s("demo")}},"Configure demo access")),a.a.createElement("h3",null,"Settings"),a.a.createElement("p",null,a.a.createElement("b",null,"Host")," (without /v1, e.g."," ",a.a.createElement("i",null,"https://miniflux.mydomain.tld"),"):",a.a.createElement("br",null),a.a.createElement(ze,{value:c,onChange:function(e){return o(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"API key")," (generated in Miniflux):",a.a.createElement("br",null),a.a.createElement(ze,{value:l,onChange:function(e){return s(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Maximum number of items to fetch"),":",a.a.createElement("br",null),a.a.createElement(ze,{value:g,onChange:function(e){return b(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Wallabag URL for integration")," (optional, without /bookmarklet):",a.a.createElement("br",null),a.a.createElement(ze,{value:O,onChange:function(e){return j(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Theme"),":",a.a.createElement("br",null),a.a.createElement("select",{value:e.theme,onChange:function(t){return e.themeSetter(t.target.value)}},a.a.createElement("option",{value:"auto"},"auto"),a.a.createElement("option",{value:"light"},"light"),a.a.createElement("option",{value:"dark"},"dark"))),a.a.createElement("p",null,a.a.createElement("b",null,"Icon cache size"),":",Math.round(w.length/1024),"k",a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){localStorage.removeItem("favicons"),k("")}},"Clear cache")),a.a.createElement("button",{onClick:I},"OK"),a.a.createElement("button",{onClick:e.onClose},"Cancel"))}function Le(){var e=Object(g.a)(["\n\tbody {\n\t\tmargin: 0px;\n\t\tfont-family: Verdana, sans-serif;\n\t\tfont-size: 12px;\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\tdiv.Pane {\n\t\toverflow: auto;\n\t\tpadding: 0px\n\t}\n\ta {\n\t\tcolor: ","\n\t}\n\tbutton {\n\t\tborder: 1px solid grey;\n\t\tborder-radius: 4px;\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\t&: hover {\n\t\t\tcolor: ",";\n\t\t\tbackground-color: ",";\n\t\t}\n\t}\n\tselect {\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\t"]);return Le=function(){return e},e}var He=Object(p.b)(Le(),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.link}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.dropdownbg}),(function(e){return e.theme.dropdownfg})),Re={body:"#fefefe",text:"#363537",link:"blue",readentry:"#bbb",errorentry:"red",hoverbg:"grey",selectbg:"lightslategrey",feedbubble:"#2a89bc",categorybubble:"#454545",preview:"#bbb",unreaddot:"#555",listheaderbg:"#ddd",itemheaderbg:"lightgoldenrodyellow",buttonbg:"#bbb",buttonfg:"#363537",dropdownbg:"#fefefe",dropdownfg:"#363537",modalbg:"darkgrey",errorbg:"lightcoral",errorfg:"inherit"},Ze=Object(s.a)(Object(s.a)({},Re),{body:"#363537",text:"#fafafa",link:"#2a89bc",readentry:"#999",categorybubble:"#959595",unreaddot:"#bbb",listheaderbg:"#464547",itemheaderbg:"#464547",buttonbg:"#565557",buttonfg:"#fafafa",dropdownbg:"#565557",dropdownfg:"#fafafa",modalbg:"#565557",errorbg:"darkred"});n(50);function Te(){var e=Object(g.a)(["\n\tfloat: right;\n\tmargin-top: 5px;\n\tmargin-right: 5px;\n\tfont-size: 16px;\n\twidth: 30px;\n\theight: 30px;\n"]);return Te=function(){return e},e}function Je(){var e=Object(g.a)(["\n\tfloat: right;\n\tmargin-right: 20px;\n"]);return Je=function(){return e},e}function Qe(){var e=Object(g.a)(["\n\tpadding: 10px;\n\tbackground-color: ",";\n\tcolor: ",";\n\ttext-align: center;\n\tposition: absolute;\n\twidth: 100%;\n\tz-index: 100;\n\tfont-weight: bold;\n"]);return Qe=function(){return e},e}var Ge=p.c.div(Qe(),(function(e){return e.theme.errorbg}),(function(e){return e.theme.errorfg})),Ae=p.c.div(Je()),Ke=p.c.button(Te()),Ye=function(e){return e.reduce((function(e,t){return e+(t.unreads||0)}),0)},Be=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ze:Re;var Ve=function(){var e=Object(r.useState)(localStorage.getItem("theme")||"auto"),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(),i=Object(m.a)(o,2),g=i[0],v=i[1],O=Object(r.useState)(),j=Object(m.a)(O,2),x=j[0],E=j[1],w=Object(r.useState)(),k=Object(m.a)(w,2),I=k[0],S=k[1],y=Object(r.useState)([]),C=Object(m.a)(y,2),_=C[0],N=C[1],D=Object(r.useState)(!1),z=Object(m.a)(D,2),F=z[0],L=z[1],H=Object(r.useState)(!localStorage.getItem("miniflux_server")),R=Object(m.a)(H,2),Z=R[0],T=R[1],J=Object(r.useState)(!0),Q=Object(m.a)(J,2),G=Q[0],A=Q[1],K=Object(r.useState)([]),Y=Object(m.a)(K,2),B=Y[0],V=Y[1],W=a.a.useState(),U=Object(m.a)(W,2)[1],X=a.a.useCallback((function(){return U({})}),[]),q=JSON.parse(localStorage.getItem("favicons"))||{};return Object(r.useEffect)((function(){G&&function(){var e=Object(f.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P("feeds",v);case 2:t=e.sent,n=[],t.forEach((function(e){n.find((function(t){return t.id===e.category.id}))||n.push(e.category)})),r=[{id:-1,title:"All",fetch_url:"entries",unreads:0},{id:-2,title:"Starred",fetch_url:"entries?starred=true",unreads:0}],n.filter((function(e){return e})).sort((function(e,t){return e.title.localeCompare(t.title)})).forEach((function(e){r.push(e),r.push.apply(r,Object(d.a)(t.filter((function(t){return t.category.id===e.id})).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return Object.assign(e,{fetch_url:"feeds/"+e.id+"/entries",is_feed:!0})}))))})),r.forEach(function(){var e=Object(f.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.icon_data="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgODAgODAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDgwIDgwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8ZyBpZD0iX3gzN183X0Vzc2VudGlhbF9JY29uc18xOV8iPg0KCTxwYXRoIGlkPSJEb2N1bWVudCIgZD0iTTY5LjIsMjIuNEw0Ny40LDAuNkM0NywwLjIsNDYuNSwwLDQ2LDBIMTRjLTIuMiwwLTQsMS44LTQsNHY3MmMwLDIuMiwxLjgsNCw0LDRoNTJjMi4yLDAsNC0xLjgsNC00VjIzLjcNCgkJQzY5LjksMjMuMSw2OS42LDIyLjgsNjkuMiwyMi40eiBNNDgsNi44TDYzLjIsMjJINDhWNi44eiBNNjYsNzZIMTRWNGgzMHYyMGMwLDEuMSwwLjksMiwyLDJoMjBWNzZ6Ii8+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==",!t.icon||!(t.id in q)){e.next=5;break}t.icon_data=q[t.id],e.next=12;break;case 5:if(!t.icon){e.next=12;break}return e.next=8,P("feeds/"+t.id+"/icon",v);case 8:n=e.sent,t.icon_data="data:"+n.data,localStorage.setItem("favicons",JSON.stringify(Object(s.a)(Object(s.a)({},JSON.parse(localStorage.getItem("favicons"))),{},Object(l.a)({},t.id,t.icon_data)))),X();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N(r),V(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),A(!1)}),[G,q,X]),Object(r.useEffect)((function(){var e=function(){var e=Object(f.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(parseInt(t)&&(n=_,t=_.find((function(e){return e.id===t&&e.fetch_url}))),t.fetch_url){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,P(t.fetch_url+(t.fetch_url.includes("?")?"&":"?")+"status=unread&limit=1",v);case 5:r=e.sent,t.unreads=r.total,document.title=Ye(n.filter((function(e){return e.id>0&&e.is_feed})))+" | reminiflux",n.filter((function(e){return!e.fetch_url})).forEach((function(e){e.unreads=Ye(n.filter((function(t){return t.category&&t.category.id===e.id})))})),X();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();B.length>0&&(B.forEach((function(t){return e(t,B)})),V([]))}),[_,X,B]),Object(h.a)("h",(function(){Z||L(!0)}),[Z]),Object(h.a)("shift+d",(function(){Z||c("light"===n?"dark":"light")}),[Z,n]),a.a.createElement(p.a,{theme:"auto"===n?Be:"light"===n?Re:Ze},a.a.createElement(He,null),F?a.a.createElement(Pe,{onClose:function(){return L(!1)}}):Z?a.a.createElement(Fe,{theme:n,themeSetter:c,onClose:function(){E(null),S(null),T(!1)},onSubmit:function(){v(null),A(!0)}}):a.a.createElement("div",null,g&&a.a.createElement(Ge,null,"API error: ",String(g),a.a.createElement(Ae,null,a.a.createElement("button",{onClick:function(){return v(null)}},"X"))),a.a.createElement(b.a,{split:"vertical",minSize:250,defaultSize:parseInt(localStorage.getItem("v_split"))||"35%",onChange:function(e){return localStorage.setItem("v_split",e)}},a.a.createElement("div",null,a.a.createElement(Ke,{onClick:function(){return T(!0)},title:"Settings"},"\u2699"),a.a.createElement(Ke,{onClick:function(){var e=Object(f.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.target.blur(),e.next=3,P("feeds/refresh",v,{});case 3:A(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),title:"Refresh feeds and counts"},"\u21bb"),a.a.createElement(M,{currentFeed:x,feeds:_,onFeedChange:E,errorHandler:v})),a.a.createElement(b.a,{split:"horizontal",minSize:"10%",defaultSize:parseInt(localStorage.getItem("h_split"))||"40%",onChange:function(e){return localStorage.setItem("h_split",e)}},a.a.createElement(le,{currentFeed:x,currentItem:I,feeds:_,onItemChange:S,updateUnread:V,errorHandler:v}),a.a.createElement(xe,{currentItem:I,errorHandler:v})))))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ve,null)),document.getElementById("root"))}},[[31,1,2]]]);