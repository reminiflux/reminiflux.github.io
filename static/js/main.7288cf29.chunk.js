(this.webpackJsonpreminiflux=this.webpackJsonpreminiflux||[]).push([[0],{115:function(e,t,n){e.exports=n(204)},203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(69),c=n.n(o),i=n(9),u=n.n(i),l=n(44),f=n(19),d=n(22),s=n(15),m=n(6),b=n(3),g=n(34),h=n(2),p=n(5),v=n(46),O=n.n(v),x=n(47),k=n.n(x);function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=localStorage.getItem("miniflux_server"),a=localStorage.getItem("miniflux_api_key");if(!r||!a)return t("Server settings not configured."),new Promise((function(e,t){return null}));var o={headers:{"X-Auth-Token":a}};n&&(o.method="PUT",o.body=JSON.stringify(n));var c=r+"/v1/"+e,i=function(e){return t(e+" ("+c+")")};return fetch(c,o).then((function(e){if(!e.ok)throw e;return 204===e.status?e:e.json()})).catch((function(e){if(e instanceof TypeError)i(e.message);else if(e instanceof Response){var t=e.headers.get("content-type");t&&-1!==t.indexOf("application/json")?e.json().then((function(e){return i(e.error_message)})):e.text().then((function(e){return i(e)}))}else i(String(e));return Promise.reject()}))}function E(e){var t=(Date.now()-Date.parse(e))/1e3;return t>86400?Math.floor(t/86400)+"d":t>3600?Math.floor(t/3600)+"h":Math.floor(t/60)+"m"}function w(e,t,n){return a.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:n&&{textDecoration:"none",color:"inherit"}},e)}function y(e){var t=document.createElement("canvas");t.width=16,t.height=16;var n=t.getContext("2d"),r=function(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(e)%360;return n.beginPath(),n.rect(0,0,16,16),n.fillStyle="hsl("+r+", 50%, 25%)",n.fill(),n.fillStyle="hsl("+(360-r)+", 100%, 75%)",n.font="bold 14px sans-serif",n.textBaseline="middle",n.textAlign="center",n.fillText(e[0],t.width/2,t.height/2+1),t.toDataURL()}function S(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tfloat: left;\n\tmargin-right: 3px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return S=function(){return e},e}function I(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-top: 0px;\n\tmargin-right: 5px;\n\tfont-size: 12px;\n\twidth: 30px;\n\theight: 30px;\n"]);return I=function(){return e},e}function C(){var e=Object(b.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tvertical-align: middle;\n\tmargin-right: 5px;\n"]);return C=function(){return e},e}function _(){var e=Object(b.a)(["\n\tmargin-left: ",";\n\tfont-weight: ",";\n\tbackground-color: ",";\n\tcolor: ",";\n\tpadding: 2px;\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n\t&:hover "," {\n\t\tdisplay: inline-block;\n\t}\n\t"," {\n\t\tbackground-color: ",";\n\t}\n"]);return _=function(){return e},e}function F(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-right: 10px;\n\tfont-weight: bold;\n\tcolor: ",";\n\tdisplay: none;\n\t&:hover {\n\t\tcolor: red;\n\t\tcursor: pointer;\n\t}\n"]);return F=function(){return e},e}function R(){var e=Object(b.a)(["\n\tmargin-left: 10px;\n\tborder-radius: 4px;\n\tfont-weight: bold;\n\ttext-align: center;\n\tfont-size: 10px;\n\tcolor: white;\n\tmin-width: 20px;\n\tdisplay: inline-block;\n\tpadding: 1px;\n"]);return R=function(){return e},e}function H(){var e=Object(b.a)(["\n\tpadding: 5px;\n"]);return H=function(){return e},e}var z=h.c.div(H()),M=h.c.span(R()),T=h.c.span(F(),(function(e){return e.theme.text})),N=h.c.div(_(),(function(e){return e.isFeed?"20px":"0px"}),(function(e){return e.isFeed?"inherit":"bold"}),(function(e){return e.selected?e.theme.selectbg:"inherit"}),(function(e){return e.error?e.theme.errorentry:e.unread?"inherit":e.theme.readentry}),(function(e){return e.theme.hoverbg}),T,M,(function(e){return e.isFeed?e.theme.feedbubble:e.theme.categorybubble})),P=h.c.img(C()),D=h.c.button(I()),A=h.c.div(S()),U=function(e,t){var n;switch(t.type){case"collapse":n=[].concat(Object(d.a)(e),[t.category]);break;case"expand":n=e.filter((function(e){return e!==t.category}));break;default:return e}return localStorage.setItem("collapsed",JSON.stringify(n)),n};var J=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),o=n[0],c=n[1],i=Object(r.useReducer)(U,JSON.parse(localStorage.getItem("collapsed"))||[]),u=Object(m.a)(i,2),l=u[0],f=u[1],d=function(){return c(!o)},s=Object(r.useState)([]),b=Object(m.a)(s,2),g=b[0],h=b[1],v=Object(r.useRef)(),x=function(e){v.current&&v.current.scrollIntoView({block:"center"}),e.preventDefault()};return Object(p.a)("up",(function(t){e.onFeedChange(g[g.indexOf(e.currentFeed)-1>=0?g.indexOf(e.currentFeed)-1:0]),x(t)}),[e,g]),Object(p.a)("down",(function(t){e.onFeedChange(g[g.indexOf(e.currentFeed)+1<g.length?g.indexOf(e.currentFeed)+1:g.length-1]),x(t)}),[e,g]),Object(p.a)("shift+u",(function(){return d()}),[o]),Object(p.a)("x",(function(){if(e.currentFeed){var t=e.currentFeed.is_feed?e.currentFeed.category.id:e.currentFeed.id;t<0||f({type:l.includes(t)?"expand":"collapse",category:t})}}),[e.currentFeed,l]),Object(r.useEffect)((function(){h(e.feeds.filter((function(e){return(!o||e.unreads>0)&&(!e.is_feed||e.is_feed&&!l.includes(e.category.id))}))),e.clearTrigger(!1)}),[e,o,l]),a.a.createElement(z,null,a.a.createElement(D,{onClick:function(e){d(),e.target.blur()},title:"Toggle showing all/unread feeds"},o?"\u26aa":"\u26ab"),g.map((function(t){return a.a.createElement("div",{key:t.fetch_url||t.id},!t.fetch_url&&(l.includes(t.id)?a.a.createElement(A,{onClick:function(){return f({type:"expand",category:t.id})}},"\u25b6"):a.a.createElement(A,{onClick:function(){return f({type:"collapse",category:t.id})}},"\u25bc")),a.a.createElement(O.a,{time:2,onClickNHold:function(n){return e.markAllRead(t)},onEnd:function(n,r){r||e.onFeedChange(t)}},a.a.createElement(N,{ref:t===e.currentFeed?v:null,isFeed:t.is_feed,selected:t===e.currentFeed,unread:t.unreads,error:t.parsing_error_count,title:t.parsing_error_message||"Updated "+E(t.checked_at)+" ago"},t.is_feed&&a.a.createElement(P,{src:t.icon_data}),t.title,t.unreads>0&&a.a.createElement(M,null," ",t.unreads," "),a.a.createElement(T,{title:"Double click to mark all items read",onClick:function(e){return e.stopPropagation()},onDoubleClick:function(n){n.stopPropagation(),e.markAllRead(t)}},"\u2713"))))})))};function B(){var e=Object(b.a)(["\n\theight: 20px;\n\tfont-size: 90%;\n\twidth: 40px;\n\tmargin-right: 5px;\n"]);return B=function(){return e},e}function L(){var e=Object(b.a)(["\n\tfloat: right;\n"]);return L=function(){return e},e}function Y(){var e=Object(b.a)(["\n\tfont-size: 90%;\n"]);return Y=function(){return e},e}function K(){var e=Object(b.a)(["\n\tfont-weight: bold;\n\tfont-size: 120%;\n"]);return K=function(){return e},e}function V(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n"]);return V=function(){return e},e}function W(){var e=Object(b.a)(["\n\tpadding: 2px;\n\twidth: 100%;\n\tbackground: ",";\n\tborder-bottom: 1px solid lightgray;\n"]);return W=function(){return e},e}function X(){var e=Object(b.a)(["\n\tfont-size: 80%;\n\tcolor: ",";\n\tmargin-left: 10px;\n"]);return X=function(){return e},e}function Z(){var e=Object(b.a)(["\n\twhite-space: nowrap;\n\toverflow: hidden;\n\twidth: ",";\n\ttext-align: ",";\n"]);return Z=function(){return e},e}function q(){var e=Object(b.a)(["\n\tcolor: ",";\n\tbackground-color: ",";\n\t&:hover {\n\t\tbackground-color: ",";\n\t\tcursor: pointer;\n\t}\n"]);return q=function(){return e},e}function $(){var e=Object(b.a)(["\n\tborder: none;\n\tborder-collapse: collapse;\n\twidth: 100%;\n\ttable-layout: fixed;\n"]);return $=function(){return e},e}function G(){var e=Object(b.a)(["\n\theight: 10px;\n\twidth: 10px;\n\tborder: 1px solid #bbb;\n\tbackground-color: ",";\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n"]);return G=function(){return e},e}function Q(){var e=Object(b.a)(["\n\twidth: 16px;\n\theight: 16px;\n\tvertical-align: middle;\n"]);return Q=function(){return e},e}var ee=h.c.img(Q()),te=h.c.div(G(),(function(e){return e.read?e.theme.body:e.theme.unreaddot})),ne=h.c.table($()),re=h.c.tr(q(),(function(e){return e.read?e.theme.readentry:"inherit"}),(function(e){return e.selected?e.theme.selectbg:"inherit"}),(function(e){return e.theme.hoverbg})),ae=h.c.td(Z(),(function(e){return e.width||"100%"}),(function(e){return e.align||"left"})),oe=h.c.span(X(),(function(e){return e.theme.preview})),ce=a.a.forwardRef((function(e,t){return a.a.createElement(re,{read:"unread"!==e.item.status,ref:t,selected:e.selected},a.a.createElement(ae,{width:"20px"},a.a.createElement(ee,{src:e.feed.icon_data,alt:e.feed.title,title:e.feed.title})),a.a.createElement(ae,{onClick:e.markRead,width:"20px"},a.a.createElement(te,{read:"unread"!==e.item.status})),a.a.createElement(ae,{onClick:e.onItemChange},e.item.title,a.a.createElement(oe,null,function(e){var t=document.createElement("span");return t.innerHTML=e.slice(0,500),t.querySelectorAll("*").forEach((function(e){return e.textContent?e.textContent+=" ":e.innerText+=" "})),[t.textContent||t.innerText].toString().replace(/ +/g," ")}(e.item.content))),a.a.createElement(ae,{width:"40px",align:"right",onClick:e.onItemChange,title:e.item.published_at},E(e.item.published_at)))}));function ie(e){var t=Object(r.useRef)(),n=function(t){t&&(e.onItemChange(t),"unread"===t.status&&e.markRead([t]))},o=function(e,r){n(e),t.current&&t.current.scrollIntoView({block:"center"}),r.preventDefault()};return Object(p.a)("left,p,k",(function(t){o(e.items[e.currentIndex-1>=0?e.currentIndex-1:0],t)}),[e]),Object(p.a)("right,n,j,space",(function(t){o(e.items[e.currentIndex+1<e.items.length?e.currentIndex+1:e.currentIndex<0?0:e.items.length-1],t)}),[e]),Object(p.a)("home",(function(t){o(e.items[0],t)}),[e]),Object(p.a)("end",(function(t){o(e.items[e.items.length-1],t)}),[e]),Object(p.a)("m",(function(t){e.currentIndex>=0&&e.markRead([e.items[e.currentIndex]],"unread"===e.items[e.currentIndex].status)}),[e]),a.a.createElement(ne,null,a.a.createElement("tbody",null,e.items.map((function(r){return a.a.createElement(ce,{key:r.id,ref:e.currentItem===r?t:null,item:r,selected:e.currentItem===r,feed:e.feeds.find((function(e){return e.id===r.feed.id&&e.category})),onItemChange:function(){return n(r)},markRead:function(){return e.markRead([r],"unread"===r.status)},errorHandler:e.errorHandler})}))))}var ue=h.c.div(W(),(function(e){return e.theme.listheaderbg})),le=h.c.div(V()),fe=h.c.span(K()),de=h.c.span(Y()),se=h.c.div(L()),me=h.c.button(B());function be(e){var t=function(){e.markRead(e.items)};return Object(p.a)("shift+A",(function(){return t()}),[e.items]),Object(p.a)("u",(function(){return e.setShowRead(!e.showRead)}),[e.showRead]),Object(p.a)("s",(function(){return e.setSortOldFirst(!e.sortOldFirst)}),[e.sortOldFirst]),a.a.createElement(ue,null,e.currentFeed&&a.a.createElement(le,null,a.a.createElement(fe,null,e.currentFeed.title,"\xa0",e.currentFeed.site_url&&w(a.a.createElement("span",null,"\u2197"),e.currentFeed.site_url,!0)),"\xa0",a.a.createElement(de,null,"(",e.items.length," items)")),a.a.createElement(se,null,a.a.createElement(me,{onClick:t,title:"Mark all as read"},"\u2713"),a.a.createElement(me,{onClick:function(){e.currentIndex>=0&&e.markRead(e.items.slice(0,e.currentIndex+1))},title:"Mark all until selection as read"},"\u2913"),a.a.createElement(me,{onClick:function(){e.currentIndex>=0&&e.markRead(e.items.slice(e.currentIndex))},title:"Mark all after selection as read"},"\u2912"),a.a.createElement("select",{value:e.showRead?"a":"u",onChange:function(t){e.setShowRead("a"===t.target.value),t.target.blur()}},a.a.createElement("option",{value:"u"},"Show unread only"),a.a.createElement("option",{value:"a"},"Show all")),a.a.createElement("select",{value:e.sortOldFirst?"o":"n",onChange:function(t){e.setSortOldFirst("o"===t.target.value),t.target.blur()}},a.a.createElement("option",{value:"n"},"Newest first"),a.a.createElement("option",{value:"o"},"Oldest first"))))}var ge=function(e){var t=Object(r.useState)([]),n=Object(m.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(!1),l=Object(m.a)(i,2),f=l[0],b=l[1],h=Object(r.useState)("o"===localStorage.getItem("sort")),p=Object(m.a)(h,2),v=p[0],O=p[1],x=Object(r.useState)("a"===localStorage.getItem("filter")),k=Object(m.a)(x,2),E=k[0],w=k[1];Object(r.useEffect)((function(){(function(){var t=Object(s.a)(u.a.mark((function t(){var n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentFeed){t.next=12;break}return b(!0),n=e.currentFeed.fetch_url?[e.currentFeed.fetch_url]:e.feeds.filter((function(e){return e.category})).filter((function(t){return t.category.id===e.currentFeed.id})).map((function(e){return e.fetch_url})),t.next=5,Promise.all(n.map((function(t){return j(t+(t.includes("?")?"&":"?")+"limit="+(parseInt(localStorage.getItem("fetch_limit"))||100)+"&order=published_at&direction="+(v?"asc":"desc")+(E?"":"&status=unread"),e.errorHandler)})));case 5:r=t.sent,a=[],r.forEach((function(e){return a.push.apply(a,Object(d.a)(e.entries))})),c(a.sort((function(e,t){return v?e.published_at.localeCompare(t.published_at):t.published_at.localeCompare(e.published_at)}))),b(!1),t.next=13;break;case 12:c([]);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[v,E,e.currentFeed,e.feeds,e.errorHandler]);var y=function(){var t=Object(s.a)(u.a.mark((function t(n,r){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=7;break}return t.next=3,j("entries",e.errorHandler,{entry_ids:n.map((function(e){return e.id})),status:r||void 0===r?"read":"unread"});case 3:e.updateUnread(n.map((function(e){return e.feed.id})).filter((function(e,t,n){return n.indexOf(e)===t}))),a=o,n.forEach((function(e){return a[a.indexOf(e)].status=r||void 0===r?"read":"unread"})),c(a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return a.a.createElement(g.a,{split:"horizontal",minSize:"26px",defaultSize:"26px",allowResize:!1},a.a.createElement(be,{items:o,currentFeed:e.currentFeed,currentIndex:e.currentItem?o.indexOf(e.currentItem):-1,sortOldFirst:v,setSortOldFirst:function(e){O(e),localStorage.setItem("sort",e?"o":"n")},showRead:E,setShowRead:function(e){w(e),localStorage.setItem("filter",e?"a":"u")},markRead:y,errorHandler:e.errorHandler}),f?"...":a.a.createElement(ie,{items:o,feeds:e.feeds,currentItem:e.currentItem,currentIndex:e.currentItem?o.indexOf(e.currentItem):-1,onItemChange:e.onItemChange,markRead:y,errorHandler:e.errorHandler}))};function he(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tfloat: right;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\timg {\n\t\twidth: 27px;\n\t\theight: 27px;\n\t}\n"]);return he=function(){return e},e}function pe(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n\tfloat: right;\n\tfont-size: 20px;\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n"]);return pe=function(){return e},e}function ve(){var e=Object(b.a)(["\n\tpadding: 5px;\n"]);return ve=function(){return e},e}function Oe(){var e=Object(b.a)(["\n\tdisplay: inline-block;\n"]);return Oe=function(){return e},e}function xe(){var e=Object(b.a)(["\n\tpadding: 2px;\n\tbackground-color: ",";\n\tborder-bottom: 1px solid lightgrey;\n\tmargin-left: 2px;\n\tmargin-right: 2px;\n"]);return xe=function(){return e},e}var ke=h.c.div(xe(),(function(e){return e.theme.itemheaderbg})),je=h.c.div(Oe()),Ee=h.c.div(ve()),we=h.c.div(pe()),ye=h.c.div(he());function Se(e){var t=localStorage.getItem("wallabag");t&&window.open(t.replace(/\/$/,"")+"/bookmarklet?url="+encodeURIComponent(e),"_blank")}var Ie=function(e){var t=Object(r.useState)(),n=Object(m.a)(t,2),o=n[0],c=n[1],i=Object(r.useRef)();Object(p.a)("f",(function(){return d()}),[o]),Object(p.a)("v",(function(){return o&&window.open(o.url,"_blank")}),[o]),Object(p.a)("c",(function(){return o&&window.open(o.comments_url||o.url,"_blank")}),[o]),Object(p.a)("w",(function(){return o&&Se(o.url)}),[o]),Object(p.a)("pagedown",(function(e){e.preventDefault();var t=document.getElementsByClassName("Pane horizontal Pane2")[1];t.scrollTop+=t.clientHeight})),Object(p.a)("pageup",(function(e){e.preventDefault();var t=document.getElementsByClassName("Pane horizontal Pane2")[1];t.scrollTop-=t.clientHeight})),Object(r.useEffect)((function(){c(e.currentItem),i.current&&i.current.scrollIntoView()}),[e.currentItem]);var l,d=function(){var t=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=5;break}return t.next=3,j("entries/"+o.id+"/bookmark",e.errorHandler,{});case 3:o.starred=!o.starred,c(Object(f.a)(Object(f.a)({},o),{},{starred:o.starred}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o?a.a.createElement("div",{ref:i},a.a.createElement(ke,null,a.a.createElement(je,null,w(o.title,o.url),"\xa0",w(a.a.createElement("span",{role:"img","aria-label":"comments"},"\ud83d\udcac"),o.comments_url||o.url,!0),a.a.createElement("br",null),o.author||o.feed.title,","," ",(l=o.published_at,k()(l).format("D MMM HH:mm"))),a.a.createElement(we,{title:"Toggle star",onClick:d},String.fromCharCode(o.starred?9733:9734)),localStorage.getItem("wallabag")&&a.a.createElement(ye,{onClick:function(){return Se(o.url)}},a.a.createElement("img",{alt:"Wallabag",title:"Send to Wallabag",src:"/wallabag.svg"}))),a.a.createElement(Ee,{id:"itemcontent",dangerouslySetInnerHTML:{__html:o.content}})):null},Ce=n(114),_e=n(113),Fe=n.n(_e);function Re(){var e=Object(b.a)(["\n\twidth: 350px;\n"]);return Re=function(){return e},e}function He(){var e=Object(b.a)(["\n\ttext-align: center;\n\tpadding: 5px;\n"]);return He=function(){return e},e}function ze(){var e=Object(b.a)(["\n\ttext-align: center;\n"]);return ze=function(){return e},e}function Me(){var e=Object(b.a)(["\n\t.Modal {\n\t\tposition: absolute;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\tright: auto;\n\t\tbottom: auto;\n\t\tbackground-color: ",";\n\t\tpadding: 10px;\n\t\tmargin-right: -50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\t.Overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: ",";\n\t}\n"]);return Me=function(){return e},e}var Te=[["Up","Open previous feed"],["Down","Open next feed"],["U","Toggle showing unread/all feeds"],["x","Collapse/uncollapse current category"],["Left/p/k","Open previous item"],["Right/n/j/Space","Open next item"],["Home","Open first item"],["End","Open last item"],["PageUp","Scroll item content up"],["PageDown","Scroll item content down"],["m","Mark item as read/unread"],["A","Mark all items as read"],["u","Toggle showing unread/all items"],["s","Toggle item sort order (newest/oldest first)"],["f","Star/unstar item"],["v","Open original link in new tab"],["c","Open comments link in new tab"],["w","Send original link to Wallabag (if configured)"],["D","Toggle light/dark theme"],["r","Refresh unread count for all feeds"],["R","Trigger refetch of all feeds and full refresh of feed list"],["h","Show keyboard shortcuts"],["Escape/Enter","Close modal window"]],Ne=Object(h.c)((function(e){var t=e.className,n=e.modalClassName,r=Object(Ce.a)(e,["className","modalClassName"]);return a.a.createElement(Fe.a,Object.assign({className:n,portalClassName:t},r))})).attrs({overlayClassName:"Overlay",modalClassName:"Modal"})(Me(),(function(e){return e.theme.body}),(function(e){return e.theme.modalbg})),Pe=h.c.h2(ze()),De=h.c.table(He()),Ae=h.c.input(Re());function Ue(e){return Object(p.a)("esc, enter",(function(){e.onClose()})),a.a.createElement(Ne,{isOpen:!0,ariaHideApp:!1},a.a.createElement(Pe,null,"Keyboard shortcuts"),a.a.createElement(De,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Key"),a.a.createElement("th",null,"Command"))),a.a.createElement("tbody",null,Te.map((function(e,t){return a.a.createElement("tr",{key:t},e.map((function(e,t){return a.a.createElement("td",{key:t},e)})))})))),a.a.createElement("button",{onClick:e.onClose},"OK"))}function Je(e){var t=Object(r.useState)(localStorage.getItem("miniflux_server")||""),n=Object(m.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(localStorage.getItem("miniflux_api_key")||""),u=Object(m.a)(i,2),l=u[0],f=u[1],d=Object(r.useState)(localStorage.getItem("fetch_limit")||100),s=Object(m.a)(d,2),b=s[0],g=s[1],h=Object(r.useState)(localStorage.getItem("wallabag")||""),v=Object(m.a)(h,2),O=v[0],x=v[1],j=Object(r.useState)(localStorage.getItem("favicons")||""),E=Object(m.a)(j,2),y=E[0],S=E[1];Object(p.a)("esc",(function(){e.onClose()}),{filter:function(){return!0}}),Object(p.a)("enter",(function(){I()}),{filter:function(){return!0}},[o,l,b,O]);var I=function(){localStorage.setItem("miniflux_server",o||""),localStorage.setItem("miniflux_api_key",l||""),localStorage.setItem("fetch_limit",parseInt(b)||100),localStorage.setItem("wallabag",O||""),localStorage.setItem("theme",e.theme),e.onSubmit(),e.onClose()};return a.a.createElement(Ne,{isOpen:!0,ariaHideApp:!1},a.a.createElement(Pe,null,"Reminiflux"),a.a.createElement("p",null,w("Homepage","https://github.com/reminiflux/reminiflux"),a.a.createElement("br",null),"Build date:"," ",k()("2020-10-08T09:47:45.590Z").format("YYYY-MM-DD HH:mm:ss (Z)"),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){c("https://minifluxdemo.duckdns.org:9999"),f("demo")}},"Configure demo access")),a.a.createElement("h3",null,"Settings"),a.a.createElement("p",null,a.a.createElement("b",null,"Host")," (without /v1, e.g."," ",a.a.createElement("i",null,"https://miniflux.mydomain.tld"),"):",a.a.createElement("br",null),a.a.createElement(Ae,{value:o,onChange:function(e){return c(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"API key")," (generated in Miniflux):",a.a.createElement("br",null),a.a.createElement(Ae,{value:l,onChange:function(e){return f(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Maximum number of items to fetch"),":",a.a.createElement("br",null),a.a.createElement(Ae,{value:b,onChange:function(e){return g(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Wallabag URL for integration")," (optional, without /bookmarklet):",a.a.createElement("br",null),a.a.createElement(Ae,{value:O,onChange:function(e){return x(e.target.value)}})),a.a.createElement("p",null,a.a.createElement("b",null,"Theme"),":",a.a.createElement("br",null),a.a.createElement("select",{value:e.theme,onChange:function(t){return e.themeSetter(t.target.value)}},a.a.createElement("option",{value:"auto"},"auto"),a.a.createElement("option",{value:"light"},"light"),a.a.createElement("option",{value:"dark"},"dark"))),a.a.createElement("p",null,a.a.createElement("b",null,"Icon cache size"),":",Math.round(y.length/1024),"k",a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){localStorage.removeItem("favicons"),S("")}},"Clear cache")),a.a.createElement("button",{onClick:I},"OK"),a.a.createElement("button",{onClick:e.onClose},"Cancel"))}function Be(){var e=Object(b.a)(["\n\tbody {\n\t\tmargin: 0px;\n\t\tfont-family: Verdana, sans-serif;\n\t\tfont-size: 12px;\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\tdiv.Pane {\n\t\toverflow: auto;\n\t\tpadding: 0px\n\t}\n\ta {\n\t\tcolor: ","\n\t}\n\tbutton {\n\t\tborder: 1px solid grey;\n\t\tborder-radius: 4px;\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t\t&: hover {\n\t\t\tcolor: ",";\n\t\t\tbackground-color: ",";\n\t\t}\n\t}\n\tselect {\n\t\tbackground: ",";\n\t\tcolor: ",";\n\t}\n\t#itemcontent >* img {\n\t\tmax-width: 100%;\n\t}\n\t.cnh_holding button {\n\t\tbackground: -webkit-linear-gradient(\n\t\t\t",",\n\t\t\t",")\n\t\t\t"," no-repeat 0 0;\n\t\tbackground: linear-gradient(\n\t\t\t",",\n\t\t\t",")\n\t\t\t"," no-repeat 0 0;\n\t\tmix-blend-mode: multiply;\n\t\tbackground-size: 100% 100%;\n\t\t-webkit-animation: fill 2s forwards infinite;\n\t\tanimation: fill 2s forwards infinite;\n\t\tcolor: ",";\n\t}\n\t@-webkit-keyframes fill {\n\t\tto { background-size: 100% 0}\n\t}\n\t@keyframes fill {\n\t\tto { background-size: 100% 0}\n\t}\n\t.cnh_holding div {\n\t\tbackground: -webkit-linear-gradient(to left, darkred, darkred) darkred no-repeat 0 0;\n\t\tbackground: linear-gradient(to left, darkred, darkred) darkred no-repeat 0 0;\n\t\tmix-blend-mode: normal;\n\t\tbackground-size: 220% 100%;\n\t\t-webkit-animation: bar 2s forwards infinite;\n\t\tanimation: bar 2s forwards infinite;\n\t}\n\t@-webkit-keyframes bar {\n\t\tfrom { background-position: -120% 0}\n\t\tto { background-position: 0 0}\n\t}\n\t@keyframes bar {\n\t\tfrom { background-position: -120% 0}\n\t\tto { background-position: 0 0}\n\t}\n\t"]);return Be=function(){return e},e}var Le=Object(h.b)(Be(),(function(e){return e.theme.body}),(function(e){return e.theme.text}),(function(e){return e.theme.link}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.dropdownbg}),(function(e){return e.theme.dropdownfg}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.buttonfg}),(function(e){return e.theme.buttonbg}),(function(e){return e.theme.buttonbg})),Ye={body:"#fefefe",text:"#363537",link:"blue",readentry:"#bbb",errorentry:"red",hoverbg:"grey",selectbg:"lightslategrey",feedbubble:"#2a89bc",categorybubble:"#454545",preview:"#bbb",unreaddot:"#555",listheaderbg:"#ddd",itemheaderbg:"lightgoldenrodyellow",buttonbg:"#bbb",buttonfg:"#363537",dropdownbg:"#fefefe",dropdownfg:"#363537",modalbg:"darkgrey",errorbg:"lightcoral",errorfg:"inherit"},Ke=Object(f.a)(Object(f.a)({},Ye),{body:"#363537",text:"#fafafa",link:"#2a89bc",readentry:"#999",categorybubble:"#959595",unreaddot:"#bbb",listheaderbg:"#464547",itemheaderbg:"#464547",buttonbg:"#565557",buttonfg:"#fafafa",dropdownbg:"#565557",dropdownfg:"#fafafa",modalbg:"#565557",errorbg:"darkred"});n(203);function Ve(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-top: 5px;\n\tmargin-right: 5px;\n\tfont-size: 16px;\n\twidth: 30px;\n\theight: 30px;\n"]);return Ve=function(){return e},e}function We(){var e=Object(b.a)(["\n\tfloat: right;\n\tmargin-right: 20px;\n"]);return We=function(){return e},e}function Xe(){var e=Object(b.a)(["\n\tpadding: 10px;\n\tbackground-color: ",";\n\tcolor: ",";\n\ttext-align: center;\n\tposition: absolute;\n\twidth: 100%;\n\tz-index: 100;\n\tfont-weight: bold;\n"]);return Xe=function(){return e},e}var Ze=h.c.div(Xe(),(function(e){return e.theme.errorbg}),(function(e){return e.theme.errorfg})),qe=h.c.div(We()),$e=h.c.button(Ve()),Ge=function(e){return e.reduce((function(e,t){return e+(t.unreads||0)}),0)},Qe=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ke:Ye;var et=function(){var e=Object(r.useState)(localStorage.getItem("theme")||"auto"),t=Object(m.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(),i=Object(m.a)(c,2),b=i[0],v=i[1],x=Object(r.useState)(),k=Object(m.a)(x,2),E=k[0],w=k[1],S=Object(r.useState)(),I=Object(m.a)(S,2),C=I[0],_=I[1],F=Object(r.useState)([]),R=Object(m.a)(F,2),H=R[0],z=R[1],M=Object(r.useState)(!1),T=Object(m.a)(M,2),N=T[0],P=T[1],D=Object(r.useState)(!localStorage.getItem("miniflux_server")),A=Object(m.a)(D,2),U=A[0],B=A[1],L=Object(r.useState)(!0),Y=Object(m.a)(L,2),K=Y[0],V=Y[1],W=Object(r.useState)(!0),X=Object(m.a)(W,2),Z=X[0],q=X[1],$=Object(r.useState)([]),G=Object(m.a)($,2),Q=G[0],ee=G[1],te=a.a.useState(),ne=Object(m.a)(te,2)[1],re=a.a.useCallback((function(){return ne({})}),[]),ae=JSON.parse(localStorage.getItem("favicons"))||{};Object(r.useEffect)((function(){K&&function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("feeds",v);case 2:t=e.sent,n=[],t.forEach((function(e){n.find((function(t){return t.id===e.category.id}))||n.push(e.category)})),r=[{id:-1,title:"All",fetch_url:"entries",unreads:0},{id:-2,title:"Starred",fetch_url:"entries?starred=true",unreads:0}],n.filter((function(e){return e})).sort((function(e,t){return e.title.localeCompare(t.title)})).forEach((function(e){r.push(e),r.push.apply(r,Object(d.a)(t.filter((function(t){return t.category.id===e.id})).sort((function(e,t){return e.title.localeCompare(t.title)})).map((function(e){return Object.assign(e,{fetch_url:"feeds/"+e.id+"/entries",is_feed:!0})}))))})),r.forEach(function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.icon_data=y(t.title),!t.icon||!(t.id in ae)){e.next=5;break}t.icon_data=ae[t.id],e.next=12;break;case 5:if(!t.icon){e.next=12;break}return e.next=8,j("feeds/"+t.id+"/icon",v);case 8:n=e.sent,t.icon_data="data:"+n.data,localStorage.setItem("favicons",JSON.stringify(Object(f.a)(Object(f.a)({},JSON.parse(localStorage.getItem("favicons"))),{},Object(l.a)({},t.id,t.icon_data)))),re();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z(r),ee(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),V(!1)}),[K,ae,re]),Object(r.useEffect)((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(parseInt(t)&&(n=H,t=H.find((function(e){return e.id===t&&e.fetch_url}))),t.fetch_url){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j(t.fetch_url+(t.fetch_url.includes("?")?"&":"?")+"status=unread&limit=1",v);case 5:r=e.sent,t.unreads=r.total,q(!0),document.title=Ge(n.filter((function(e){return e.id>0&&e.is_feed})))+" | reminiflux",n.filter((function(e){return!e.fetch_url})).forEach((function(e){e.unreads=Ge(n.filter((function(t){return t.category&&t.category.id===e.id})))})),re();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Q.length>0&&([-2,-1].concat(Object(d.a)(Q)).forEach((function(t){return e(t,Q)})),ee([]))}),[H,re,Q]);var oe=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch_url?[t.fetch_url]:H.filter((function(e){return e.category})).filter((function(e){return e.category.id===t.id})).map((function(e){return e.fetch_url})),e.next=3,Promise.all(n.map((function(e){return j(e+(e.includes("?")?"&":"?")+"&status=unread")}),v));case 3:if(r=e.sent,a=[],r.forEach((function(e){return a.push.apply(a,Object(d.a)(e.entries))})),a.length){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,j("entries",v,{entry_ids:a.map((function(e){return e.id})),status:"read"});case 10:ee(a.map((function(e){return e.feed.id})).filter((function(e,t,n){return n.indexOf(e)===t})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){ee(H.map((function(e){return e.id})))},ie=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("feeds/refresh",v,{});case 2:V(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.a)("h",(function(){U||P(!0)}),[U]),Object(p.a)("shift+d",(function(){U||o("light"===n?"dark":"light")}),[U,n]),Object(p.a)("r",ce,[H]),Object(p.a)("shift+r",ie,[H]),a.a.createElement(h.a,{theme:"auto"===n?Qe:"light"===n?Ye:Ke},a.a.createElement(Le,null),N?a.a.createElement(Ue,{onClose:function(){return P(!1)}}):U?a.a.createElement(Je,{theme:n,themeSetter:o,onClose:function(){w(null),_(null),B(!1)},onSubmit:function(){v(null),V(!0)}}):a.a.createElement("div",null,b&&a.a.createElement(Ze,null,"API error: ",String(b),a.a.createElement(qe,null,a.a.createElement("button",{onClick:function(){return v(null)}},"X"))),a.a.createElement(g.a,{split:"vertical",minSize:250,defaultSize:parseInt(localStorage.getItem("v_split"))||"35%",onChange:function(e){return localStorage.setItem("v_split",e)}},a.a.createElement("div",null,a.a.createElement($e,{onClick:function(){return B(!0)},title:"Settings"},"\u2699"),a.a.createElement(O.a,{time:2,onClickNHold:ie,onEnd:function(e,t){t||ce(),e.target.blur()}},a.a.createElement($e,{title:"Short press to refresh unread count,  long press to trigger fetch and full refresh"},"\u21bb")),a.a.createElement(J,{currentFeed:E,feeds:H,onFeedChange:w,markAllRead:oe,errorHandler:v,updateTrigger:Z,clearTrigger:q})),a.a.createElement(g.a,{split:"horizontal",minSize:"10%",defaultSize:parseInt(localStorage.getItem("h_split"))||"40%",onChange:function(e){return localStorage.setItem("h_split",e)}},a.a.createElement(ge,{currentFeed:E,currentItem:C,feeds:H,onItemChange:_,updateUnread:ee,errorHandler:v}),a.a.createElement(Ie,{currentItem:C,errorHandler:v})))))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(et,null)),document.getElementById("root"))}},[[115,1,2]]]);